{{ 'sticky-cart.css' | asset_url | stylesheet_tag }}
{{ 'sticky-cart.js' | asset_url | script_tag }}

{% if product %}
  <style>
    #sticky-cart-bar .sticky-cart__btn {
      background: {{ block.settings.button_bg_color }};
      color: {{ block.settings.button_text_color }};
      font-size: {{ block.settings.button_text_size }}px;
    }
  </style>

  <div
    id="sticky-cart-bar"
    class="sticky-cart"
    data-variant-id="{{ product.selected_or_first_available_variant.id }}"
  >
    <div class="sticky-cart__inner">
      <div class="sticky-cart__info">
        <strong>{{ product.title }}</strong>
        <span>{{ product.price | money }}</span>
      </div>

      <button class="sticky-cart__btn">
        {{ block.settings.button_text }}
      </button>
    </div>
  </div>
{% endif %}

{% schema %}
{
  "name": "Sticky Add to Cart",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Add to cart"
    },
    {
      "type": "color",
      "id": "button_bg_color",
      "label": "Button Background Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text Color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "button_text_size",
      "label": "Button Text Size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 16
    }
  ]
}
{% endschema %}
